<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Triangulations of domains · Triangulate.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Triangulate.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../triangle-h/">Output of <code>triangle -h</code></a></li><li><a class="tocitem" href="../../changes/">Changes</a></li><li><a class="tocitem" href="../../allindex/">Index</a></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Triangulations of domains</a></li><li><a class="tocitem" href="../example_pointsets/">Triangulations of point sets</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Triangulations of domains</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Triangulations of domains</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGeometry/Triangulate.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Triangulations-of-domains-1"><a class="docs-heading-anchor" href="#Triangulations-of-domains-1">Triangulations of domains</a><a class="docs-heading-anchor-permalink" href="#Triangulations-of-domains-1" title="Permalink"></a></h1><p>These examples can be loaded into Julia (Revise.jl recommended) and run by calling one of the methods with the optional arguments &quot;Plotter=PyPlot&quot;. Alternatively, you can download a <a href="../example_domains.ipynb">jupyter notebook</a> created from this source.</p><p>Set  up environment</p><pre><code class="language-julia">using Triangulate
using Test
using Printf

injupyter()=(isdefined(Main, :IJulia) &amp;&amp; Main.IJulia.inited)

if injupyter()
    import PyPlot
end</code></pre><h3 id="Constrained-Delaunay-triangulation-(CDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary.-1"><a class="docs-heading-anchor" href="#Constrained-Delaunay-triangulation-(CDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary.-1">Constrained Delaunay triangulation (CDT) of a domain given by a segment list specifying its boundary.</a><a class="docs-heading-anchor-permalink" href="#Constrained-Delaunay-triangulation-(CDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary.-1" title="Permalink"></a></h3><p>This is obtained by specifying the &quot;p&quot; flag.</p><pre><code class="language-julia">function example_domain_cdt(;Plotter=nothing)
    triin=Triangulate.TriangulateIO()
    triin.pointlist=Matrix{Cdouble}([0.0 0.0 ; 1.0 0.0 ; 1.0  1.0 ; 0.6 0.6; 0.0 1.0]&#39;)
    triin.segmentlist=Matrix{Cint}([1 2 ; 2 3 ; 3 4 ; 4 5 ; 5 1 ]&#39;)
    triin.segmentmarkerlist=Vector{Int32}([1, 2, 3, 4, 5])
    display(triin)
    (triout, vorout)=triangulate(&quot;pQ&quot;, triin)
    display(triout)
    plot_in_out(Plotter,triin,triout,title=&quot;Domain triangulation&quot;)
    @test numberofpoints(triout)&gt;=numberofpoints(triin)
    @test numberofsegments(triout)&gt;=numberofsegments(triin)
    @test numberoftriangles(triout)&gt;0
end</code></pre><pre><code class="language-julia">injupyter() &amp;&amp; example_domain_cdt(Plotter=PyPlot);</code></pre><h3 id="Constrained-Delaunay-triangulation-(CDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary-together-with-a-maximum-area-constraint.-1"><a class="docs-heading-anchor" href="#Constrained-Delaunay-triangulation-(CDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary-together-with-a-maximum-area-constraint.-1">Constrained Delaunay triangulation (CDT) of a domain given by a segment list specifying its boundary together with a maximum  area constraint.</a><a class="docs-heading-anchor-permalink" href="#Constrained-Delaunay-triangulation-(CDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary-together-with-a-maximum-area-constraint.-1" title="Permalink"></a></h3><p>This constraint is specfied as a floating point number given after the -a flag. Be careful to not give it in the exponential format as Triangle would be unable to analyse it. Therefore it is dangerous to a number in the string interpolation and it is better to convert it to a string before using <code>@sprintf</code>. Specifying only the maximum area constraint does not prevent very thin triangles from occuring at the boundary.</p><pre><code class="language-julia">function example_domain_cdt_area(;Plotter=nothing,maxarea=0.05)
    triin=Triangulate.TriangulateIO()
    triin.pointlist=Matrix{Cdouble}([0.0 0.0 ; 1.0 0.0 ; 1.0  1.0 ; 0.6 0.6; 0.0 1.0]&#39;)
    triin.segmentlist=Matrix{Cint}([1 2 ; 2 3 ; 3 4 ; 4 5 ; 5 1 ]&#39;)
    triin.segmentmarkerlist=Vector{Int32}([1, 2, 3, 4, 5])
    area=@sprintf(&quot;%.15f&quot;,maxarea) # Don&#39;t use exponential format!
    display(triin)
    (triout, vorout)=triangulate(&quot;pa$(area)Q&quot;, triin)
    display(triout)
    plot_in_out(Plotter,triin,triout,voronoi=vorout, title=&quot;Domain CDT with area constraint&quot;)
    @test numberofpoints(triout)&gt;=numberofpoints(triin)
    @test numberofsegments(triout)&gt;=numberofsegments(triin)
    @test numberoftriangles(triout)&gt;0
end</code></pre><pre><code class="language-julia">injupyter() &amp;&amp; example_domain_cdt_area(Plotter=PyPlot,maxarea=0.05);</code></pre><h3 id="Boundary-conforming-Delaunay-triangulation-(BCDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary-1"><a class="docs-heading-anchor" href="#Boundary-conforming-Delaunay-triangulation-(BCDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary-1">Boundary conforming  Delaunay triangulation (BCDT) of a domain given by a segment list specifying its boundary</a><a class="docs-heading-anchor-permalink" href="#Boundary-conforming-Delaunay-triangulation-(BCDT)-of-a-domain-given-by-a-segment-list-specifying-its-boundary-1" title="Permalink"></a></h3><p>In addition to the area constraint specify the -D flag in order to keep the triangle circumcenters  within the domain.</p><pre><code class="language-julia">function example_domain_bcdt_area(;Plotter=nothing,maxarea=0.05)
    triin=Triangulate.TriangulateIO()
    triin.pointlist=Matrix{Cdouble}([0.0 0.0 ; 1.0 0.0 ; 1.0  1.0 ; 0.6 0.6; 0.0 1.0]&#39;)
    triin.segmentlist=Matrix{Cint}([1 2 ; 2 3 ; 3 4 ; 4 5 ; 5 1 ]&#39;)
    triin.segmentmarkerlist=Vector{Int32}([1, 2, 3, 4, 5])
    display(triin)
    area=@sprintf(&quot;%.15f&quot;,maxarea)
    (triout, vorout)=triangulate(&quot;pa$(area)DQ&quot;, triin)
    display(triout)
    plot_in_out(Plotter,triin,triout,voronoi=vorout, title=&quot;Boundary conforming Delaunay triangulation&quot;)
    @test numberofpoints(triout)&gt;=numberofpoints(triin)
    @test numberofsegments(triout)&gt;=numberofsegments(triin)
    @test numberoftriangles(triout)&gt;0
end</code></pre><pre><code class="language-julia">injupyter() &amp;&amp; example_domain_bcdt_area(Plotter=PyPlot,maxarea=0.05);</code></pre><h3 id="Constrained-Delaunay-triangulation-of-a-domain-with-minimum-angle-condition-1"><a class="docs-heading-anchor" href="#Constrained-Delaunay-triangulation-of-a-domain-with-minimum-angle-condition-1">Constrained Delaunay triangulation of a domain with minimum angle condition</a><a class="docs-heading-anchor-permalink" href="#Constrained-Delaunay-triangulation-of-a-domain-with-minimum-angle-condition-1" title="Permalink"></a></h3><p>The &quot;q&quot; flag  allows to specify a minimum angle constraint preventing skinny triangles.</p><p>This combination of flags, possibly with an additional &quot;D&quot; flag is recommended when creating triangulations for finite element or finite volume methods. It the mimimum angle is larger then 28.6 degrees, Triangle&#39;s algorithm may run into an infinite loop.</p><pre><code class="language-julia">function example_domain_qcdt_area(;Plotter=nothing,minangle=20, maxarea=0.05)
    triin=Triangulate.TriangulateIO()
    triin.pointlist=Matrix{Cdouble}([0.0 0.0 ; 1.0 0.0 ; 1.0  1.0 ; 0.6 0.6; 0.0 1.0]&#39;)
    triin.segmentlist=Matrix{Cint}([1 2 ; 2 3 ; 3 4 ; 4 5 ; 5 1 ]&#39;)
    triin.segmentmarkerlist=Vector{Int32}([1, 2, 3, 4, 5])
    display(triin)
    area=@sprintf(&quot;%.15f&quot;,maxarea)
    angle=@sprintf(&quot;%.15f&quot;,minangle)
    (triout, vorout)=triangulate(&quot;pa$(area)q$(angle)&quot;, triin)
    display(triout)
    plot_in_out(Plotter,triin,triout,voronoi=vorout, title=&quot;Quality triangulation&quot;)
    @test numberofpoints(triout)&gt;=numberofpoints(triin)
    @test numberofsegments(triout)&gt;=numberofsegments(triin)
    @test numberoftriangles(triout)&gt;0

end</code></pre><pre><code class="language-julia">injupyter() &amp;&amp; example_domain_qcdt_area(Plotter=PyPlot,maxarea=0.05,minangle=20);</code></pre><h3 id="Triangulation-of-a-domain-with-refinement-callback-1"><a class="docs-heading-anchor" href="#Triangulation-of-a-domain-with-refinement-callback-1">Triangulation of a domain with refinement callback</a><a class="docs-heading-anchor-permalink" href="#Triangulation-of-a-domain-with-refinement-callback-1" title="Permalink"></a></h3><p>A maximum area constraint is specified in the <code>unsuitable</code> callback which is activated via the &quot;u&quot; flag if it has been passed before calling triangulate. In addition, the &quot;q&quot; flag  allows to specify a minimum angle constraint preventing skinny triangles.</p><pre><code class="language-julia">function example_domain_localref(;Plotter=nothing,minangle=20)
    center_x=0.6
    center_y=0.6
    localdist=0.1
    function unsuitable(x1,y1,x2,y2,x3,y3,area)
        bary_x=(x1+x2+x3)/3.0
        bary_y=(y1+y2+y3)/3.0
        dx=bary_x-center_x
        dy=bary_y-center_y
        qdist=dx^2+dy^2
        qdist&gt;1.0e-5 &amp;&amp; area&gt;0.1*qdist
    end

    triunsuitable(unsuitable)
    triin=Triangulate.TriangulateIO()
    triin.pointlist=Matrix{Cdouble}([0.0 0.0 ; 1.0 0.0 ; 1.0  1.0 ; 0.6 0.6; 0.0 1.0]&#39;)
    triin.segmentlist=Matrix{Cint}([1 2 ; 2 3 ; 3 4 ; 4 5 ; 5 1 ]&#39;)
    triin.segmentmarkerlist=Vector{Int32}([1, 2, 3, 4, 5])
    display(triin)
    angle=@sprintf(&quot;%.15f&quot;,minangle)
    (triout, vorout)=triangulate(&quot;pauq$(angle)Q&quot;, triin)
    display(triout)
    plot_in_out(Plotter,triin,triout,voronoi=vorout, title=&quot;Quality triangulation with local refinement&quot;)
    @test numberofpoints(triout)&gt;=numberofpoints(triin)
    @test numberofsegments(triout)&gt;=numberofsegments(triin)
    @test numberoftriangles(triout)&gt;0
end</code></pre><pre><code class="language-julia">injupyter() &amp;&amp; example_domain_localref(Plotter=PyPlot,minangle=20);</code></pre><h3 id="Triangulation-of-a-heterogeneous-domain-1"><a class="docs-heading-anchor" href="#Triangulation-of-a-heterogeneous-domain-1">Triangulation of a heterogeneous domain</a><a class="docs-heading-anchor-permalink" href="#Triangulation-of-a-heterogeneous-domain-1" title="Permalink"></a></h3><p>The segment list specifies its boundary and the inner boundary between subdomains. An additional region list is specified which provides &quot;region points&quot; in <code>regionlist[1,:]</code> and <code>regionlist[2,:]</code>.  These kind of mark the subdomains. <code>regionlist[3,:]</code> contains an attribute which labels the subdomains. <code>regionlist[4,:]</code> contains a maximum area value. <code>size(regionlist,2)</code> is the number of regions.</p><p>With the &quot;A&quot; flag, the subdomain labels are spread to all triangles in the corresponding subdomains, becoming available in <code>triangleattributelist[1,:]</code>. With the &quot;a&quot; flag, the area constraints are applied in the corresponding subdomains.</p><pre><code class="language-julia">function example_domain_regions(;Plotter=nothing,minangle=20)
    triin=Triangulate.TriangulateIO()
    triin.pointlist=Matrix{Cdouble}([0.0 0.0 ;0.5 0.0; 1.0 0.0 ; 1.0  1.0 ; 0.6 0.6; 0.0 1.0]&#39;)
    triin.segmentlist=Matrix{Cint}([1 2 ; 2 3 ;3 4 ; 4 5 ; 5 6 ; 6 1 ; 2 5]&#39;)
    triin.segmentmarkerlist=Vector{Int32}([1, 2, 3, 4, 5, 6, 7])
    triin.regionlist=Matrix{Cdouble}([0.2 0.8; 0.2 0.2; 1 2 ; 0.01 0.05])
    display(triin)
    angle=@sprintf(&quot;%.15f&quot;,minangle)
    (triout, vorout)=triangulate(&quot;paAq$(angle)Q&quot;, triin)
    display(triout)

    plot_in_out(Plotter,triin,triout,voronoi=vorout, title=&quot;Hetero domain triangulation&quot;)

    @test numberofpoints(triout)&gt;=numberofpoints(triin)
    @test numberofsegments(triout)&gt;=numberofsegments(triin)
    @test numberoftriangles(triout)&gt;0
end</code></pre><pre><code class="language-julia">injupyter() &amp;&amp; example_domain_regions(Plotter=PyPlot,minangle=20);</code></pre><h3 id="Triangulation-of-a-domain-with-holes-1"><a class="docs-heading-anchor" href="#Triangulation-of-a-domain-with-holes-1">Triangulation of a domain with holes</a><a class="docs-heading-anchor-permalink" href="#Triangulation-of-a-domain-with-holes-1" title="Permalink"></a></h3><p>The segment list specifies its boundary and the boundaries of the holes. An additional hole list is specified which provides &quot;hole points&quot; in <code>holelist[1,:]</code> and <code>holelist[2,:]</code>.</p><pre><code class="language-julia">function example_domain_holes(;Plotter=nothing,minangle=20,maxarea=0.001)
    triin=Triangulate.TriangulateIO()
    triin.pointlist=Matrix{Cdouble}([0.0 0.0;
                                     1.0 0.0;
                                     1.0 1.0;
                                     0.0 1.0;
                                     0.2 0.2;
                                     0.3 0.2;
                                     0.3 0.3;
                                     0.2 0.3;
                                     0.6 0.6;
                                     0.7 0.6;
                                     0.7 0.7;
                                     0.6 0.7;
                                     ]&#39;)
    triin.segmentlist=Matrix{Cint}([1 2; 2 3; 3 4; 4 1; 5 6; 6 7; 7 8; 8 5;  9 10; 10 11; 11 12; 12 9;]&#39;)
    triin.segmentmarkerlist=Vector{Int32}([1, 1,1,1, 2,2,2,2, 3,3,3,3])
    triin.holelist=[0.25 0.25; 0.65 0.65;]&#39;
    display(triin)
    area=@sprintf(&quot;%.15f&quot;,maxarea) # Don&#39;t use exponential format!
    angle=@sprintf(&quot;%.15f&quot;,minangle)
    (triout, vorout)=triangulate(&quot;pa$(area)q$(angle)Q&quot;, triin)
    display(triout)

    plot_in_out(Plotter,triin,triout,voronoi=vorout, title=&quot;Domain with holes&quot;)

    @test numberofpoints(triout)&gt;=numberofpoints(triin)
    @test numberofsegments(triout)&gt;=numberofsegments(triin)
    @test numberoftriangles(triout)&gt;0
end</code></pre><pre><code class="language-julia">injupyter() &amp;&amp; example_domain_holes(Plotter=PyPlot,minangle=20,maxarea=0.05);</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../allindex/">« Index</a><a class="docs-footer-nextpage" href="../example_pointsets/">Triangulations of point sets »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 6 March 2020 22:14">Friday 6 March 2020</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
